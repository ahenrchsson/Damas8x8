:root { font-family: 'Inter', system-ui, Segoe UI, Roboto, Arial; }
* { box-sizing: border-box; }
body { margin: 0; background: #0f1115; color: #e7e7e7; }
.hidden { display: none !important; }

a { color: #8cb4ff; }

.topbar { display:flex; justify-content:space-between; align-items:center; padding: 14px 18px; background:#151a22; border-bottom:1px solid #232a36; position:sticky; top:0; z-index:5; }
.brand { font-weight: 800; letter-spacing: .5px; }
.me { opacity: .9; }
.top-actions { display:flex; gap: 12px; align-items:center; }

.wrap { padding: 18px; max-width: 1240px; margin: 0 auto 32px; }
.grid { display:grid; gap: 16px; }
.lobby-grid { grid-template-columns: 1.1fr .9fr; }
.game-grid { grid-template-columns: 1fr 1.1fr 0.9fr; align-items: start; }
.card { background:#151a22; border:1px solid #232a36; border-radius: 14px; padding: 14px; box-shadow: 0 10px 22px rgba(0,0,0,.25); }
h2 { margin: 0; font-size: 18px; }
h3 { margin-top: 0; }
.cardHeader { display:flex; align-items:center; justify-content: space-between; gap: 10px; margin-bottom: 8px; }
.row { display:flex; gap: 10px; margin: 8px 0; flex-wrap: wrap; }
.row.stack { flex-direction: column; }
input, select { background:#0f1115; border:1px solid #2a3242; border-radius: 10px; padding: 10px 12px; color:#e7e7e7; outline: none; min-width: 0; }
button { background:#2b6cff; color:white; border:none; border-radius:10px; padding:10px 12px; cursor:pointer; font-weight: 700; }
button:disabled { opacity: .45; cursor:not-allowed; }
button.ghost { background: transparent; border:1px solid #2a3242; }
button.danger { background: #e04f5f; }
.hint { opacity:.8; font-size: 13px; margin-top: 6px; min-height: 18px; }
.pill { background:#1f2634; border:1px solid #2a3242; padding: 6px 10px; border-radius: 999px; font-size: 12px; opacity:.9; }
.pill.ghost { background: transparent; }

.tableWrap { overflow:auto; max-height: 320px; border-radius: 12px; border:1px solid #232a36; }
.tbl { width: 100%; border-collapse: collapse; }
.tbl th, .tbl td { padding: 8px 10px; border-bottom:1px solid #232a36; font-size: 13px; }
.tbl th { position: sticky; top: 0; background:#151a22; text-align:left; }

.chatLog { max-height: 240px; overflow-y: auto; background:#0c0e13; border:1px solid #232a36; border-radius: 10px; padding: 10px; display: flex; flex-direction: column; gap: 6px; }
.chatLog.tall { min-height: 320px; }
.chatLine { font-size: 13px; line-height: 1.35; }
.chatLine .user { font-weight: 700; color: #8cb4ff; margin-right: 6px; }
.chatLine .time { opacity: .6; margin-left: 6px; font-size: 11px; }
.chatInputRow { display: flex; gap: 8px; margin-top: 8px; }
.chatInputRow input { flex: 1; }

.boardCard { text-align: center; }
.board {
  width: min(520px, 90vw);
  height: min(520px, 90vw);
  margin: 10px auto;
  display:grid;
  grid-template-columns: repeat(8, 1fr);
  border-radius: 14px;
  overflow:hidden;
  border:1px solid #232a36;
  user-select:none;
  background:#111621;
}
.cell { display:flex; align-items:center; justify-content:center; position: relative; }
.dark { background:#2a2f3a; }
.light { background:#1a1f29; }
.cell.clickable { outline: 2px solid rgba(43,108,255,.5); outline-offset: -2px; cursor:pointer; }
.cell.target { box-shadow: inset 0 0 0 3px rgba(0, 255, 170, .55); cursor:pointer; }
.cell.forced { box-shadow: inset 0 0 0 3px rgba(255, 199, 0, .4); }

.piece { width: 76%; height: 76%; border-radius: 999px; box-shadow: inset 0 0 0 2px rgba(255,255,255,.08), 0 8px 16px rgba(0,0,0,.35); position: relative; }
.red { background:#d64a4a; }
.black { background:#4a4f5b; }
.king::after { content:"â™•"; position:absolute; font-size: 22px; opacity:.95; inset: 0; display:flex; align-items:center; justify-content:center; }
.cell.selected { box-shadow: inset 0 0 0 3px rgba(255,255,255,.3); }
.cell.preview-step { box-shadow: inset 0 0 0 3px rgba(43,108,255,.45); }
.cell.preview-step::after { content: attr(data-step); position:absolute; top:6px; left:6px; background:rgba(43,108,255,.8); color:white; width:18px; height:18px; border-radius: 999px; font-size: 12px; display:flex; align-items:center; justify-content:center; }
.captureBadge { position:absolute; bottom:6px; right:6px; background: #00c896; color:#0f1115; width:20px; height:20px; border-radius: 999px; display:flex; align-items:center; justify-content:center; font-size: 12px; font-weight: 800; box-shadow: 0 2px 6px rgba(0,0,0,.45); }

.infoLine { margin: 6px 0; opacity: .9; }
.players { display:flex; flex-direction: column; gap: 6px; margin: 8px 0; }
.player { padding: 8px 10px; border:1px solid #232a36; border-radius: 10px; background:#0f1115; }

.movePanel { margin-top: 10px; border:1px solid #232a36; border-radius: 12px; padding: 10px; background:#10141d; }
.movePanelHeader { display:flex; justify-content: space-between; gap: 8px; align-items:center; flex-wrap: wrap; }
.movePanelTitle { font-weight: 800; }
.movePanelActions { display:flex; gap: 8px; }
.routeOptions { display:flex; flex-direction: column; gap: 8px; margin-top: 8px; }
.routeCard { text-align:left; width:100%; background:#1a1f2c; border:1px solid #232a36; border-radius: 12px; padding: 10px; cursor:pointer; color: #e7e7e7; }
.routeCard .routePath { color:#b6c4ff; font-size: 12px; word-break: break-word; margin-top: 4px; }
.routeCard .routeMeta { opacity: .8; font-size: 12px; }
.routeCard .routeTitle { font-weight: 800; margin-bottom: 2px; }
.routeCard.active { border-color:#2b6cff; box-shadow: 0 0 0 1px rgba(43,108,255,.4); }
.capturePreview { margin: 6px 0; }

.drawer { position: fixed; inset:0; background: rgba(0,0,0,.55); display:flex; justify-content:flex-end; z-index: 10; }
.drawerContent { width: 420px; max-width: 92vw; background:#151a22; border-left: 1px solid #232a36; padding: 14px; }
.drawerHeader { display:flex; justify-content: space-between; align-items:center; margin-bottom: 10px; }

.modal { position: fixed; inset:0; display:flex; align-items:center; justify-content:center; background: rgba(0,0,0,.55); z-index: 12; }
.modalCard { background:#151a22; border:1px solid #232a36; border-radius: 14px; padding: 16px; width: 360px; max-width: 92vw; box-shadow: 0 16px 28px rgba(0,0,0,.4); }

@media (max-width: 1100px) {
  .lobby-grid { grid-template-columns: 1fr; }
  .game-grid { grid-template-columns: 1fr; }
  .board { width: min(460px, 96vw); height: min(460px, 96vw); }
  .topbar { position: static; }
}
